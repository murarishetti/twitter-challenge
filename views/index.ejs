<!doctype html>
<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/custom.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.0/jquery.mark.es6.js"></script>
    <script type="text/javascript" src="js/index.js"></script>

</head>
<body>
    <div class"row">
        <div class="col-xs-2 col-sm-2">
        </div>
        <div class="col-xs-9 col-sm-9">
            <h2 style="text-align:center">Search Tweets...</h2>
            <div class="form-group has-feedback">
                <input type="text" id="myInput" placeholder="Search for tweets..." >
                <i class="glyphicon glyphicon-search form-control-feedback"></i>
            </div>
            <div class="row">
                <div class="col-xs-4 col-sm-4">
                </div>
                <div class="col-xs-5 col-sm-5">
                </div>
                <div class="col-xs-3 col-sm-3">
                </div>
            </div>
            <table id="myTable">
              <tr class="header">
                <th style="width:20%;">Time</th>
                <th style="width:60%;">Tweet</th>
                <th style="width:20%;">User</th>
              </tr>
              <tbody id="tweetsTableData">
              </tbody>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-9 col-sm-9">
        </div>
        <div class="col-xs-3 col-sm-3">
            
        </div>
    </div>
</body>
<script>
    var data = <%- JSON.stringify(tweets) %>
    // console.log(data["success"]);
                  $("#tweetsTableData").empty();
                  var tmp = "";
                  data["success"].forEach(function(obj){
                        
                        var row = obj["_source"]["message"];
                        var keyword = "";
                        var link = row.substr(
                          row.indexOf("http"), row.length
                        );
                        if (row.indexOf("@") > -1) {
                          var tmp2 = link.split(" ")
                          link = tmp2[0];
                          keyword = tmp2[2];
                        }
                        
                        row = row.substr(0, row.indexOf("http"))
                        tmp = tmp + "<tr> <td>" + obj["_source"]["time"] + "</td>" +
                                "<td class='context'>" + row + "<a href='" + link + "' target='blank'>" + link + "</a> "+ 
                                "<a href='#' class='keyword'>"+ keyword +"</a> </td>" +
                                "<td>" + obj["_source"]["user"] + "</td> </td>";
                    $('.context').mark(link);
                  })
                  $("#tweetsTableData").append(tmp);
    // display(data);
</script>
</html>
   

   
    
 